<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kundli Matching for Marriage</title>
    <link rel="stylesheet" href="src/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-text">
                    <h1>Kundli Matching for Marriage</h1>
                    <p>Vedic Astrology Compatibility Analysis</p>
                </div>
                <div class="theme-toggle">
                    <button id="themeToggle" onclick="toggleTheme()" class="theme-btn">
                        <span id="themeIcon">üåô</span>
                        <span id="themeText">Dark Mode</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Tutorial Section -->
        <div class="tutorial-section">
            <div class="tutorial-header">
                <h2>üìö Learn Vedic Astrology - Kundli Matching Guide</h2>
                <button class="tutorial-toggle" onclick="toggleTutorial()">
                    <span id="tutorial-icon">üìñ Show Tutorial</span>
                </button>
            </div>
            
            <div id="tutorial-content" class="tutorial-content" style="display: none;">
                <div class="tutorial-intro">
                    <h3>üåü What is Kundli Matching?</h3>
                    <p>Kundli matching, also known as <strong>Horoscope Matching</strong> or <strong>Gun Milan</strong>, is an ancient Vedic astrology practice used to determine the compatibility between prospective marriage partners. This sacred science has been guiding families for thousands of years in making one of life's most important decisions.</p>
                </div>

                <div class="tutorial-grid">
                    <div class="tutorial-card">
                        <h4>üéØ The Purpose</h4>
                        <p>Kundli matching helps ensure:</p>
                        <ul>
                            <li>Marital harmony and happiness</li>
                            <li>Mental and emotional compatibility</li>
                            <li>Physical and sexual compatibility</li>
                            <li>Health and progeny prospects</li>
                            <li>Financial prosperity</li>
                            <li>Spiritual growth together</li>
                        </ul>
                    </div>

                    <div class="tutorial-card">
                        <h4>‚≠ê Key Concepts</h4>
                        <p><strong>Nakshatra:</strong> 27 lunar mansions or star constellations</p>
                        <p><strong>Rashi:</strong> 12 zodiac signs based on moon's position</p>
                        <p><strong>Guna:</strong> Compatibility factors for analysis</p>
                        <p><strong>Dosha:</strong> Incompatibilities that need attention</p>
                        <p><strong>Ashtakoot:</strong> The 8-factor compatibility system</p>
                    </div>
                </div>

                <div class="ashtakoot-guide">
                    <h3>üîÆ The Ashtakoot System - 8 Compatibility Factors</h3>
                    <p>The traditional system analyzes 8 different aspects of compatibility, each with specific point values totaling 36 points maximum.</p>
                    
                    <div class="guna-guide-grid">
                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>1. Varna Koot</h4>
                                <span class="points">1 Point</span>
                            </div>
                            <p><strong>Purpose:</strong> Spiritual & Social Compatibility</p>
                            <p><strong>Measures:</strong> Spiritual evolution and social harmony</p>
                            <p><strong>Categories:</strong> Brahmin, Kshatriya, Vaishya, Shudra</p>
                            <div class="compatibility-tip">
                                <strong>üí° Tip:</strong> Groom's Varna should be equal or higher than bride's
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>2. Vashya Koot</h4>
                                <span class="points">2 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Mutual Attraction & Control</p>
                            <p><strong>Measures:</strong> Who influences whom in the relationship</p>
                            <p><strong>Groups:</strong> Chatushpad, Manav, Jalachhar, Keet</p>
                            <div class="compatibility-tip">
                                <strong>üí° Tip:</strong> Same groups ensure natural understanding
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>3. Tara Koot</h4>
                                <span class="points">3 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Fortune & Prosperity</p>
                            <p><strong>Measures:</strong> Birth star compatibility and luck</p>
                            <p><strong>System:</strong> 9 Taras from Janma to Param Mitra</p>
                            <div class="compatibility-tip">
                                <strong>üí° Tip:</strong> Avoid Vadha (7th) Tara - most inauspicious
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>4. Yoni Koot</h4>
                                <span class="points">4 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Physical & Sexual Compatibility</p>
                            <p><strong>Measures:</strong> Intimate harmony and attraction</p>
                            <p><strong>Animals:</strong> 14 different animal symbols</p>
                            <div class="compatibility-tip">
                                <strong>üí° Tip:</strong> Enemy animals (like Cat-Rat) should be avoided
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>5. Graha Maitri</h4>
                                <span class="points">5 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Mental & Intellectual Compatibility</p>
                            <p><strong>Measures:</strong> Planetary friendship of birth star lords</p>
                            <p><strong>Planets:</strong> Sun, Moon, Mars, Mercury, Jupiter, Venus, Saturn</p>
                            <div class="compatibility-tip">
                                <strong>üí° Tip:</strong> Same planetary lords give maximum points
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>6. Gana Koot</h4>
                                <span class="points">6 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Temperament & Behavior</p>
                            <p><strong>Measures:</strong> Personality and nature compatibility</p>
                            <p><strong>Types:</strong> Deva (Divine), Manushya (Human), Rakshasa (Demonic)</p>
                            <div class="compatibility-tip danger">
                                <strong>‚ö†Ô∏è Warning:</strong> Deva-Rakshasa combination creates Gana Dosha
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>7. Bhakoot Koot</h4>
                                <span class="points">7 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Family Welfare & Prosperity</p>
                            <p><strong>Measures:</strong> Moon sign (Rashi) compatibility</p>
                            <p><strong>Doshas:</strong> Dwirdwadash (2-12) & Shashtashtam (6-8)</p>
                            <div class="compatibility-tip danger">
                                <strong>‚ö†Ô∏è Warning:</strong> Bhakoot Dosha affects family prosperity
                            </div>
                        </div>

                        <div class="guna-guide-card">
                            <div class="guna-guide-header">
                                <h4>8. Nadi Koot</h4>
                                <span class="points">8 Points</span>
                            </div>
                            <p><strong>Purpose:</strong> Health & Progeny</p>
                            <p><strong>Measures:</strong> Genetic compatibility and health</p>
                            <p><strong>Types:</strong> Vata (Air), Pitta (Fire), Kapha (Water/Earth)</p>
                            <div class="compatibility-tip critical">
                                <strong>üö® Critical:</strong> Same Nadi creates most serious Nadi Dosha
                            </div>
                        </div>
                    </div>
                </div>

                <div class="scoring-guide">
                    <h3>üìä Understanding Your Compatibility Score</h3>
                    <div class="score-ranges">
                        <div class="score-range excellent">
                            <div class="score-number">28-36</div>
                            <div class="score-details">
                                <h4>üü¢ Excellent Match</h4>
                                <p>77-100% Compatibility</p>
                                <p>Highly recommended for marriage. Exceptional harmony expected.</p>
                            </div>
                        </div>
                        <div class="score-range good">
                            <div class="score-number">21-27</div>
                            <div class="score-details">
                                <h4>üü° Good Match</h4>
                                <p>58-75% Compatibility</p>
                                <p>Good compatibility with minor adjustments needed.</p>
                            </div>
                        </div>
                        <div class="score-range average">
                            <div class="score-number">14-20</div>
                            <div class="score-details">
                                <h4>üü† Average Match</h4>
                                <p>39-56% Compatibility</p>
                                <p>Requires careful consideration and remedial measures.</p>
                            </div>
                        </div>
                        <div class="score-range poor">
                            <div class="score-number">0-13</div>
                            <div class="score-details">
                                <h4>üî¥ Challenging Match</h4>
                                <p>0-36% Compatibility</p>
                                <p>Significant issues. Consult experienced astrologer.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dosha-guide">
                    <h3>‚ö†Ô∏è Understanding Doshas (Incompatibilities)</h3>
                    <div class="dosha-cards">
                        <div class="dosha-card critical">
                            <h4>üö® Nadi Dosha</h4>
                            <p><strong>Most Critical:</strong> Same Nadi (constitutional type)</p>
                            <p><strong>Effects:</strong> Health issues, genetic problems, progeny difficulties</p>
                            <p><strong>Remedy:</strong> Specific pujas, medical consultation, astrologer guidance</p>
                        </div>
                        <div class="dosha-card warning">
                            <h4>‚ö†Ô∏è Gana Dosha</h4>
                            <p><strong>Issue:</strong> Deva-Rakshasa temperament clash</p>
                            <p><strong>Effects:</strong> Personality conflicts, daily life friction</p>
                            <p><strong>Remedy:</strong> Patience, understanding, counseling</p>
                        </div>
                        <div class="dosha-card warning">
                            <h4>‚ö†Ô∏è Bhakoot Dosha</h4>
                            <p><strong>Issue:</strong> Incompatible moon signs (2-12, 6-8 positions)</p>
                            <p><strong>Effects:</strong> Family problems, health issues, financial troubles</p>
                            <p><strong>Remedy:</strong> Specific pujas, gemstones, spiritual practices</p>
                        </div>
                    </div>
                </div>

                <div class="tutorial-tips">
                    <h3>üí° Important Tips for Beginners</h3>
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>üéØ Accuracy Matters</h4>
                            <p>Exact birth time (within 2-4 minutes) is crucial for accurate results. Even small differences can change your Nakshatra.</p>
                        </div>
                        <div class="tip-card">
                            <h4>üåç Birth Place Importance</h4>
                            <p>The geographical location affects planetary positions. Always use the actual birth place, not current residence.</p>
                        </div>
                        <div class="tip-card">
                            <h4>‚öñÔ∏è Holistic View</h4>
                            <p>Don't focus on just one factor. Consider the overall score and multiple aspects of compatibility.</p>
                        </div>
                        <div class="tip-card">
                            <h4>üîÆ Consult Experts</h4>
                            <p>For serious doshas or important decisions, always consult experienced Vedic astrologers for personalized guidance.</p>
                        </div>
                    </div>
                </div>

                <div class="calculation-guide">
                    <h3>üßÆ How to Calculate Kundli Score Manually</h3>
                    <p>Understanding the calculation process helps you verify results and gain deeper insights into compatibility analysis.</p>
                    
                    <div class="calculation-steps">
                        <div class="step-card">
                            <h4>Step 1: Determine Birth Details</h4>
                            <div class="step-content">
                                <p><strong>Required Information:</strong></p>
                                <ul>
                                    <li>Exact birth date, time, and place for both partners</li>
                                    <li>Calculate Moon's position to find Nakshatra and Rashi</li>
                                    <li>Use astronomical calculations or reliable software</li>
                                </ul>
                                <div class="example-box">
                                    <strong>Example:</strong><br>
                                    Groom: Born Jan 17, 1995, 4:10 AM, Patna ‚Üí Ashwini Nakshatra, Aries Rashi<br>
                                    Bride: Born Mar 12, 1997, 12:01 PM, Gaya ‚Üí Hasta Nakshatra, Virgo Rashi
                                </div>
                            </div>
                        </div>

                        <div class="step-card">
                            <h4>Step 2: Calculate Each Guna (8 Factors)</h4>
                            <div class="step-content">
                                <div class="guna-calculation">
                                    <div class="calc-item">
                                        <h5>1. Varna Koot (1 point)</h5>
                                        <p><strong>Method:</strong> Compare spiritual hierarchy</p>
                                        <p><strong>Rule:</strong> Groom's Varna ‚â• Bride's Varna = 1 point</p>
                                        <p><strong>Order:</strong> Brahmin > Kshatriya > Vaishya > Shudra</p>
                                    </div>

                                    <div class="calc-item">
                                        <h5>2. Vashya Koot (2 points)</h5>
                                        <p><strong>Method:</strong> Compare behavioral groups</p>
                                        <p><strong>Groups:</strong> Chatushpad, Manav, Jalachhar, Keet</p>
                                        <p><strong>Scoring:</strong> Same group = 2, Compatible = 1, Others = 0</p>
                                    </div>

                                    <div class="calc-item">
                                        <h5>3. Tara Koot (3 points)</h5>
                                        <p><strong>Method:</strong> Count from bride's to groom's nakshatra</p>
                                        <p><strong>Formula:</strong> ((Groom Nakshatra - Bride Nakshatra + 27) % 27) ‚Üí Tara Number</p>
                                        <p><strong>Favorable Taras:</strong> 1st, 4th, 8th = 3 points; 2nd, 6th, 9th = 1 point</p>
                                    </div>

                                    <div class="calc-item">
                                        <h5>4. Yoni Koot (4 points)</h5>
                                        <p><strong>Method:</strong> Compare animal compatibility</p>
                                        <p><strong>Scoring:</strong> Same animal = 4, Friendly = 3-2, Neutral = 1, Enemy = 0</p>
                                        <p><strong>Example:</strong> Horse-Horse = 4, Cat-Rat = 0 (enemies)</p>
                                    </div>

                                    <div class="calc-item">
                                        <h5>5. Graha Maitri (5 points)</h5>
                                        <p><strong>Method:</strong> Compare nakshatra ruling planets</p>
                                        <p><strong>Scoring:</strong> Same = 5, Friends = 4, Neutral = 3, Enemies = 0</p>
                                        <p><strong>Example:</strong> Sun-Moon = 4 (friends), Sun-Venus = 0 (enemies)</p>
                                    </div>

                                    <div class="calc-item">
                                        <h5>6. Gana Koot (6 points)</h5>
                                        <p><strong>Method:</strong> Compare temperament types</p>
                                        <p><strong>Types:</strong> Deva, Manushya, Rakshasa</p>
                                        <p><strong>Scoring:</strong> Same = 6, Deva-Manushya = 5, Deva-Rakshasa = 0</p>
                                    </div>

                                    <div class="calc-item">
                                        <h5>7. Bhakoot Koot (7 points)</h5>
                                        <p><strong>Method:</strong> Check rashi positions</p>
                                        <p><strong>Formula:</strong> Count from bride's to groom's rashi</p>
                                        <p><strong>Doshas:</strong> 2nd, 6th, 8th, 12th positions = 0 points</p>
                                    </div>

                                    <div class="calc-item critical">
                                        <h5>8. Nadi Koot (8 points) - Most Important</h5>
                                        <p><strong>Method:</strong> Compare constitutional types</p>
                                        <p><strong>Types:</strong> Vata, Pitta, Kapha</p>
                                        <p><strong>Rule:</strong> Different Nadi = 8 points, Same Nadi = 0 (Nadi Dosha)</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="step-card">
                            <h4>Step 3: Calculate Total Score</h4>
                            <div class="step-content">
                                <div class="calculation-formula">
                                    <h5>Total Score = Sum of all 8 Guna scores</h5>
                                    <p><strong>Maximum Possible:</strong> 1+2+3+4+5+6+7+8 = 36 points</p>
                                    
                                    <div class="example-calculation">
                                        <h5>Example Calculation:</h5>
                                        <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                                            <tr style="background: #f8f9fa;">
                                                <th style="padding: 8px; border: 1px solid #ddd;">Guna</th>
                                                <th style="padding: 8px; border: 1px solid #ddd;">Score</th>
                                                <th style="padding: 8px; border: 1px solid #ddd;">Max</th>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Varna</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">1</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">1</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Vashya</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">0</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">2</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Tara</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">3</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">3</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Yoni</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">0</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">4</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Graha Maitri</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">0</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">5</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Gana</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">6</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">6</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Bhakoot</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">7</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">7</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 8px; border: 1px solid #ddd;">Nadi</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">8</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">8</td>
                                            </tr>
                                            <tr style="background: #e8f5e8; font-weight: bold;">
                                                <td style="padding: 8px; border: 1px solid #ddd;">Total</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">25</td>
                                                <td style="padding: 8px; border: 1px solid #ddd;">36</td>
                                            </tr>
                                        </table>
                                        <p><strong>Result:</strong> 25/36 = 69% compatibility (Good Match)</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="step-card">
                            <h4>Step 4: Interpret the Results</h4>
                            <div class="step-content">
                                <div class="interpretation-guide">
                                    <div class="score-interpretation">
                                        <h5>Compatibility Levels:</h5>
                                        <ul>
                                            <li><strong>28-36 points (78-100%):</strong> Excellent Match - Highly recommended</li>
                                            <li><strong>21-27 points (58-75%):</strong> Good Match - Generally favorable</li>
                                            <li><strong>14-20 points (39-56%):</strong> Average Match - Requires consideration</li>
                                            <li><strong>0-13 points (0-36%):</strong> Challenging Match - Needs expert guidance</li>
                                        </ul>
                                    </div>

                                    <div class="dosha-check">
                                        <h5>Critical Dosha Check:</h5>
                                        <ul>
                                            <li><strong>Nadi Dosha:</strong> Same Nadi (0 points) - Most serious</li>
                                            <li><strong>Bhakoot Dosha:</strong> 2nd, 6th, 8th, 12th positions (0 points)</li>
                                            <li><strong>Gana Dosha:</strong> Deva-Rakshasa combination (0 points)</li>
                                        </ul>
                                        <p><em>Note: Even high total scores can be problematic if critical doshas are present.</em></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="calculation-tools">
                        <h4>üõ†Ô∏è Calculation Tools & Resources</h4>
                        <div class="tools-grid">
                            <div class="tool-card">
                                <h5>Nakshatra Calculator</h5>
                                <p>Use astronomical software or online calculators to determine exact nakshatra from birth details.</p>
                            </div>
                            <div class="tool-card">
                                <h5>Planetary Tables</h5>
                                <p>Reference tables showing nakshatra lords, ganas, yonis, and other attributes for each star.</p>
                            </div>
                            <div class="tool-card">
                                <h5>Compatibility Charts</h5>
                                <p>Pre-calculated compatibility matrices for yoni, planetary friendships, and other factors.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tutorial-conclusion">
                    <h3>üåü Ready to Begin?</h3>
                    <p>Now that you understand the basics of Kundli matching, you're ready to analyze compatibility using our authentic Vedic astrology system. Remember, this ancient wisdom has guided countless couples toward harmonious marriages for thousands of years.</p>
                    <button class="start-matching-btn" onclick="scrollToForms()">Start Your Kundli Matching Journey</button>
                </div>
            </div>
        </div>

        <div class="form-container">
            <div class="person-form">
                <h2>Groom's Details</h2>
                <form id="groomForm">
                    <input type="text" id="groomName" placeholder="Name" value="Rahul" required>
                    <input type="date" id="groomDob" value="1995-01-17" required>
                    <input type="time" id="groomTob" value="04:10" required>
                    <input type="text" id="groomPlace" placeholder="Birth Place" value="Patna, Bihar, India" required>
                </form>
            </div>

            <div class="person-form">
                <h2>Bride's Details</h2>
                <form id="brideForm">
                    <input type="text" id="brideName" placeholder="Name" value="Priya" required>
                    <input type="date" id="brideDob" value="1997-03-12" required>
                    <input type="time" id="brideTob" value="12:01" required>
                    <input type="text" id="bridePlace" placeholder="Birth Place" value="Gaya, Bihar, India" required>
                </form>
            </div>
        </div>

        <button id="matchBtn" onclick="performMatching()">Match Kundli</button>

        <div id="results" class="results-container" style="display: none;">
            <div class="results-header">
                <h2>Compatibility Results</h2>
                <button id="downloadPdfBtn" onclick="downloadPDF()" class="download-btn" style="display: none;">
                    üìÑ Download PDF Report
                </button>
            </div>
            <div id="gunaScore" class="score-display"></div>
            <div id="detailedResults" class="detailed-results"></div>
            <div id="recommendations" class="recommendations"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="src/kundli-engine.js"></script>
    <script src="src/app-minimal.js"></script>
    
    <script>
        // Debug script to check if everything loaded properly
        console.log("Page loaded");
        console.log("KundliEngine available:", typeof KundliEngine);
        console.log("performMatching available:", typeof performMatching);
        
        // Test engine creation
        try {
            const testEngine = new KundliEngine();
            console.log("‚úÖ Engine test successful");
        } catch (error) {
            console.error("‚ùå Engine test failed:", error);
        }
    </script>
</body>
</html>